# Rengex

텍스트 파일의 일부분만 추출하고 변경하는 걸 목적으로한 번역 툴입니다. 기계 번역 엔진으로 Ehnd를 사용할 수 있습니다.

범용으로 만들었지만 때문에 전용 툴보다 실제 적용엔 어려울 수 있습니다.

## 텍스트 파일 번역법

1. 프로그램 창에 번역할 파일 및 폴더를 드래그합니다.
2. 실행파일 경로/rengex/4_result 폴더에 번역 파일이 나옵니다.

파일의 일부분만 추출해야 하는 경우 정규식 설정파일을 추가로 사용할 수 있습니다. 자세한 사용법은 아래에 있습니다.

## 프로젝트 폴더 구조

- 아래 경로에 있는 파일들은 그냥 프로그램에 드래그해도 폴더 구조를 보존해줍니다.
- 드래그 할 때 자동으로 결과물을 만들어 주는 게 싫다면 버튼을 우클릭해 기본 행동을 바꿀 수 있습니다.

### 1_source/번역파일명
번역파일을 드래그하면 기본으로 그 파일을 복사해옵니다.

### 2_meta/번역파일명.meta.txt
원본 파일에 번역을 적용할 때 필요한 추출 텍스트의 위치와 길이입니다.
일단 수정은 가능하도록 위치,길이의 텍스트 파일로 되어있습니다.

### 3_translation/번역파일명.tran.txt, tran_번역.txt
복사한 번역파일에서 추출한 번역 대상 텍스트입니다. 이 파일을 번역하면 됩니다.
현재로썬 아네모네와의 호환을 위해 _번역 확장자를 가진 파일이 있으면 그 파일을 우선해줍니다.

### 4_result/번역파일명
내보내면 이 경로에 결과파일이 저장됩니다.

## 설정 파일

.gitignore와 유사하게 1_source 폴더 안에 설정 파일을 넣으면 그 폴더와 하위 폴더 안에서
해당 파일의 이름으로 끝나는 파일 전부에 설정을 적용합니다. 하지만 상속되지는 않습니다.

### *.match.txt

가져오기 단계에서 추출할 텍스트의 정규식 파일입니다. 기본값으로 파일 전체를 번역합니다.

파일 전체가 하나의 정규식이고, #으로 시작하는 줄은 주석으로 처리됩니다.

(?<영문이름>)으로 감싼 그룹의 내용만 추출합니다.

프로그램 창에서 ` 키를 누르면 regex101 사이트의 PCRE 설정으로 테스트 할 수있는 정규식 창을 띄워줍니다. 그 창에서 우클릭 누른 상태 + 휠 움직이기로 설정을 이동할 수 있습니다.

### *.repla.txt

번역 전, 후의 텍스트를 치환하는 정규식 설정 파일입니다.

첫째는 패턴 정규식입니다. 찾은 모든 해당 패턴을 치환합니다.
패턴 시작 부분에 (?=)(?:)를 붙일 수 있습니다.
(?=)는 번역 전의 치환 규칙(이하 전처리)임을 의미합니다.
(?:)는 전처리에선 "그룹이름\0"을, 후처리에선 "그룹이름\0원문\0"을 앞에 붙여달라는 것을 의미합니다.

둘째는 치환 정규식입니다. $1등으로 이전 문자열 보존이 가능합니다.
빈 문자열을 넣고 싶으면 비우지 말고 $을 적습니다.

*[파일경로]인 줄은 해당 위치에서 다른 설정파일을 적용합니다.
치환은 한 패턴이 성공하더라도 전부 수행됩니다.

## ...

- 작업 중지 기능은 없습니다.
- 스레드 개수 설정도 아직 안 넣었습니다.

## 같이 쓰면 유용한 프로그램

### [AgentRansack](https://www.mythicsoft.com/agentransack/)

기계 번역을 돌렸는데 규칙이 잘못되어 일부 파일만 다시 번역해야 할 수 있습니다.

이 때 오염된 원문이나 번역문을 알고 있다면 위 프로그램으로 문자열 검색을 하고 걸린 파일들을 Rengex에 드래그하면 다른 파일에 드는 번역 시간을 절약할 수 있습니다.

### [WinMerge](http://winmerge.org/)

파일을 비교하는데 vscode의 파일 비교도 괜찮지만 이 프로그램은 폴더 단위 비교와 3파일 비교가 가능한 점이 유용합니다.
